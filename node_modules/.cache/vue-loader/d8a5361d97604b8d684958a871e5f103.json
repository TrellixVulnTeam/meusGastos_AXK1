{"remainingRequest":"C:\\Users\\Usuario\\Desktop\\Meus gastos App\\meus-gastos\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Usuario\\Desktop\\Meus gastos App\\meus-gastos\\src\\components\\GraficoResumo.vue?vue&type=template&id=44dd8cdc&scoped=true","dependencies":[{"path":"C:\\Users\\Usuario\\Desktop\\Meus gastos App\\meus-gastos\\src\\components\\GraficoResumo.vue","mtime":1616801942419},{"path":"C:\\Users\\Usuario\\Desktop\\Meus gastos App\\meus-gastos\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Usuario\\Desktop\\Meus gastos App\\meus-gastos\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Usuario\\Desktop\\Meus gastos App\\meus-gastos\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"C:\\Users\\Usuario\\Desktop\\Meus gastos App\\meus-gastos\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Usuario\\Desktop\\Meus gastos App\\meus-gastos\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIDxkaXY+DQogICAgICAgIDxjYW52YXMgaWQ9J2dyYWZpY28nPjwvY2FudmFzPg0KICA8L2Rpdj4NCg=="},{"version":3,"sources":["C:\\Users\\Usuario\\Desktop\\Meus gastos App\\meus-gastos\\src\\components\\GraficoResumo.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,CAAC;QACE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACnC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"C:/Users/Usuario/Desktop/Meus gastos App/meus-gastos/src/components/GraficoResumo.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div>\r\n        <canvas id='grafico'></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\nimport Chart from 'chart.js';\r\n\r\nexport default {\r\n    name: 'GraficoResumo',\r\n    computed: mapGetters(['todosLancamentos']),\r\n    data(){\r\n        return{\r\n            opcoesGrafico:{\r\n                responsive: true,\r\n                title:{\r\n                    display: true,\r\n                    text: 'Dinheiro em caixa',\r\n                },\r\n                tooltips:{\r\n                    mode: 'index',\r\n                    intersect: false,\r\n                },\r\n                // hover:{\r\n                //     mode: 'nearest',\r\n                //     intersect: false,\r\n                // },\r\n                scales:{\r\n                    xAxes:[\r\n                        {\r\n                            display: true,\r\n                            scaleLabel: {\r\n                                display: true,\r\n                                labelString: \"Dias\",\r\n                            }\r\n\r\n                        }\r\n                    ],\r\n                    yAxes:[\r\n                        {\r\n                            display: true,\r\n                            scaleLabel: {\r\n                                display: true,\r\n                                labelString: \"Renda\"\r\n                            }\r\n                        }\r\n                    ]\r\n                }\r\n            },\r\n        }\r\n    },\r\n    methods:{\r\n        renderizaGrafico(){\r\n            let lancamentos = [...this.todosLancamentos];\r\n            lancamentos.sort((a, b)=> new Date(a.data) < new Date(b.data));\r\n            lancamentos.reverse();\r\n\r\n            let valorEmCaixa = 0;\r\n            let datas = [];\r\n            let valores = [];\r\n\r\n            datas = lancamentos.map( lancamento =>{\r\n                valorEmCaixa += lancamento.valor;\r\n                valores.push(valorEmCaixa)\r\n                return lancamento.data;\r\n            })\r\n\r\n            const corCurva = valorEmCaixa > 0 ? 'blue' : 'red';\r\n            const config = {\r\n                type: \"line\",\r\n                data:{\r\n                    labels: datas,\r\n                    datasets:[\r\n                        {\r\n                            label: \"Comportamento do seu dinheiro\",\r\n                            borderColor: corCurva,\r\n                            backgroundColor: corCurva,\r\n                            data: valores,\r\n                            fill: false\r\n                        }\r\n                    ]\r\n                },\r\n                options: this.opcoesGrafico,\r\n            };\r\n            const contexto = document.getElementById('grafico').getContext('2d');\r\n            new Chart(contexto, config);\r\n        }\r\n    },\r\n    mounted(){\r\n        this.renderizaGrafico();\r\n    },\r\n    created(){\r\n        this.$store.subscribe((mutation, state)=>{\r\n            if(mutation.type === \"calculaCaixa\"){\r\n                this.renderizaGrafico();\r\n                console.log('state');\r\n                console.log(state);\r\n            }\r\n        })\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\ndiv{\r\n    width: 90% !important;\r\n}\r\n\r\n</style>"]}]}